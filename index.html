<!DOCTYPE html>
<html>
<head>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body style="background: #111; color: white; display: flex; align-items: center; justify-content: center; height: 100vh; font-family: sans-serif;">
    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();

        // Detect if user is on Desktop/Web vs Mobile
        const platform = tg.platform; 

        if (platform === 'tdesktop' || platform === 'web' || platform === 'macos') {
            // It's a Desktop - Send "DESKTOP_PUNCH" command to bot
            tg.sendData("DESKTOP_PUNCH");
            tg.close();
        } else {
            // It's Mobile - Open Camera
            tg.showScanQrPopup({
                text: "Scan Station QR Code"
            }, function(text) {
                tg.sendData(text); // Sends the scanned ID (e.g., STATION_001)
                tg.closeScanQrPopup();
                tg.close();
                return true;
            });
        }
    </script>
</body>
</html>
